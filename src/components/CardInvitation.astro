---
import cancion from "@/assets/audio/Music.mp3";
import DalePlay from "@/assets/svg/DalePlay.svg";
import florInferior from "../../public/img/florInferior.png";
import florSuperior from "../../public/img/florSuperior.png";
import { Image } from "astro:assets";
---

<style>
    .textTarget {
        font-family: "Arial Rounded MT Bold", Arial, sans-serif;
        font-weight: bold;
    }

    .custom-border-gradient {
        border-image: linear-gradient(to right, #d4af37, #ffd700, #b8860b) 1;
    }

    .flor {
        position: absolute;
        width: auto;
        z-index: 10;
    }

    .flor.top-left {
        top: -9px;
        left: -6px;
        border-radius: 37px 0 0 0;
    }

    .flor.bottom-right {
        bottom: -5px;
        right: -5px;
        border-radius: 0 0 0 37px;
    }
</style>

<section
    class="backdrop-blur-md p-6 rounded-xl shadow-lg max-w-lg text-center relative border border-gray-300 bg-[#c6a8f4]"
>
    <!-- Flores en las esquinas -->
    <Image src={florInferior} alt="Flores" class="flor bottom-right" />
    <Image src={florSuperior} alt="Flores" class="flor top-left" />

    <div
        class="p-1 border-2 border-double rounded-xl custom-border-gradient relative z-0"
    >
        <section
            class="h-full w-full border-2 border-double rounded-xl p-4 custom-border-gradient"
        >
            <h2 class="text-2xl italic font-semibold mt-1 mb-4">
                <DalePlay />
            </h2>

            <!-- Reproductor personalizado -->
            <div class="flex items-center justify-center gap-4 my-4">
                <button
                    id="playBtn"
                    class="w-[3.875rem] h-[3.875rem] bg-[#422c59] text-white rounded-full flex items-center justify-center shadow hover:bg-[#2c1d3d] transition cursor-pointer"
                >
                    <svg
                        id="playIcon"
                        xmlns="http://www.w3.org/2000/svg"
                        width="32"
                        height="32"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        class="icon"
                    >
                        <path
                            id="playPath"
                            d="M9 6c0-.85.99-1.3 1.62-.78l.08.07 6 6c.38.38.38 1 0 1.38l-6 6a1 1 0 0 1-1.7-.7V6z"
                        ></path>
                    </svg>
                </button>
            </div>

            <audio id="audioPlayer" src={cancion}></audio>

            <!-- Texto invitación -->
            <div class="p-2 rounded-md mt-4 text-xs md:text-sm">
                <p class="mb-2 textTarget">
                    El tiempo vuela, y cada recuerdo es un tesoro. Te espero
                    para celebrar el dulce despertar de mis quince años,
                    brindando por lo vivido y lo que está por llegar.
                </p>
                <p class="font-bold mt-4">
                    Será un honor contar con tu presencia en esta
                    noche tan especial.
                </p>
            </div>
        </section>
    </div>
</section>

<script>
    const audio = document.getElementById("audioPlayer");
    const playBtn = document.getElementById("playBtn");
    const playIcon = document.getElementById("playIcon");

    let isPlaying = false;

    playBtn?.addEventListener("click", () => {
        if (!audio) return;

        if (isPlaying) {
            audio.pause();
            playIcon.innerHTML = `<path d="M9 6c0-.85.99-1.3 1.62-.78l.08.07 6 6c.38.38.38 1 0 1.38l-6 6a1 1 0 0 1-1.7-.7V6z" />`;
        } else {
            audio.play();
            playIcon.innerHTML = `<path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>`;
        }

        isPlaying = !isPlaying;
    });
</script>
